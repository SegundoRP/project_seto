<%= form_with model: @patient do |f| %>
  <%= f.label 'Nombre' %>
  <%= f.text_field :first_name %>
  <%= f.label 'Apellidos' %>
  <%= f.text_field :last_name %>
  <%= f.label 'Edad' %>
  <%= f.text_field :age %>
  <%= f.label 'Email' %>
  <%= f.text_field :email %>
  <%= f.label 'Dirección' %>
  <%= f.text_field :address %>
  <%= f.label 'Teléfono' %>
  <%= f.text_field :phone %>

  <% if current_page?(new_patient_path) %>
    <%= link_to_add_fields "Agregar Consulta", f, :consultations %>
    <%= f.fields_for :consultations do |c| %>
      <div class="nested-fields">
        <%= c.hidden_field :_destroy %>
        <%= c.text_field :summary %>
        <%= c.collection_select :doctor_id, Doctor.order(:first_name), :id, :first_name, include_blank: true %>
        <%= c.collection_select :type_of_service_id, TypeOfService.order(:name_of_service), :id, :name_of_service, include_blank: true %>
        <%= link_to "Remove", '#', class: "remove_fields" %>
      <div>
    <% end %>
  <% end %>
  <%= f.submit current_page?(new_patient_path) ? 'Crear' : 'Editar' %>
<% end %>
